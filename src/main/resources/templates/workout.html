<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Workout Tracker</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .container { display: flex; gap: 20px; }
        .section { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        ul { list-style: none; padding: 0; }
        li { margin-bottom: 6px; }
        form.inline { display: inline; margin-left: 8px; }
        table { border-collapse: collapse; width: 100%; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
        th { background-color: #f4f4f4; }
        label { display: block; margin-bottom: 4px; }
        input[type="number"], select, input[type="date"] { margin-left: 4px; margin-right: 10px; }
    </style>
</head>
<body>
<h1>Workout Tracker</h1>
<div class="container">

    <!-- Manage Exercises -->
    <div class="section">
        <h2>Manage Exercises</h2>
        <ul>
            <li th:each="ex : ${exercises}">
                <span th:text="${ex.name}">Exercise Name</span>
                <form th:action="@{/workout/deleteExercise/{id}(id=${ex.id})}" method="post" class="inline">
                    <input type="hidden" name="_method" value="delete" />
                    <button type="submit">Delete</button>
                </form>
            </li>
        </ul>
        <form th:action="@{/workout/addExercise}" th:object="${newExercise}" method="post">
            <label>New Exercise:
                <input th:field="*{name}" placeholder="Exercise name" required />
            </label>
            <button type="submit">Add Exercise</button>
        </form>
    </div>

    <!-- Record Workout Entry -->
    <div class="section">
        <h2>Record Workout</h2>
        <form th:action="@{/workout/recordWorkout}" method="post">
            <label>Exercise:
                <select name="exerciseId">
                    <option th:each="ex : ${exercises}" th:value="${ex.id}" th:text="${ex.name}">Exercise</option>
                </select>
            </label>
            <label>Reps:
                <input type="number" name="reps" min="1" required />
            </label>
            <label>Sets:
                <input type="number" name="sets" min="1" required />
            </label>
            <label>Weight:
                <input type="number" name="weight" step="0.1" required />
            </label>
            <button type="submit">Record</button>
        </form>
    </div>

    <!-- Workout History -->
    <div class="section">
        <h2>Workout History</h2>
        <form th:action="@{/workout}" method="get">
            <label for="date">Select date:
                <input type="date" id="date" name="date" th:value="${selectedDate}" required />
            </label>
            <button type="submit">Show</button>
        </form>
        <table>
            <thead>
            <tr>
                <th>Exercise</th>
                <th>Date</th>
                <th>Reps</th>
                <th>Sets</th>
                <th>Weight</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="entry : ${entries}">
                <td th:text="${entry.exercise.name}">Exercise</td>
                <td th:text="${entry.datePerformed}">2025-07-24</td>
                <td th:text="${entry.reps}">0</td>
                <td th:text="${entry.sets}">0</td>
                <td th:text="${entry.weight}">0.0</td>
            </tr>
            <tr th:if="${#lists.isEmpty(entries)}">
                <td colspan="5">No entries for this date.</td>
            </tr>
            </tbody>
        </table>
    </div>

</div>
</body>
</html>
