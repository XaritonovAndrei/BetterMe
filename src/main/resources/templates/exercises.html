<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Workout Tracker</title>
    <style>
        .container { display: flex; gap: 20px; }
        .section { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        ul { list-style: none; padding: 0; }
        li { margin-bottom: 8px; }
        form.inline { display: inline; }
    </style>
</head>
<body>
<h1>Workout Tracker</h1>
<div class="container">
    <!-- Left: Master Exercise List -->
    <div class="section">
        <h2>Exercises</h2>
        <ul>
            <li th:each="ex : ${exercises}">
                <span th:text="${ex.name}">Exercise Name</span>
                <!-- Add to Today's Workout -->
                <form th:action="@{/exercises/{id}/addToToday(id=${ex.id})}" method="post" class="inline">
                    <button type="submit">Add to Today's Workout</button>
                </form>
                <!-- Delete Exercise -->
                <form th:action="@{/exercises/{id}(id=${ex.id})}" method="post" class="inline">
                    <input type="hidden" name="_method" value="delete"/>
                    <button type="submit">Delete</button>
                </form>
            </li>
        </ul>
        <h3>Add New Exercise</h3>
        <form th:action="@{/exercises}" th:object="${newExercise}" method="post">
            <input th:field="*{name}" placeholder="Exercise name" required />
            <button type="submit">Add</button>
        </form>
    </div>

    <!-- Right: Today's Workout -->
    <div class="section">
        <h2>Today's Workout</h2>
        <ul>
            <li th:each="entry : ${todayExercises}">
                <span th:text="${entry.exercise.name}">Exercise Name</span>
                <!-- Remove from Today's Workout -->
                <form th:action="@{/exercises/today/{exerciseId}(exerciseId=${entry.exercise.id})}" method="post" class="inline">
                    <input type="hidden" name="_method" value="delete"/>
                    <button type="submit">Remove</button>
                </form>
            </li>
            <li th:if="${todayExercises.empty}">No exercises added yet.</li>
        </ul>
        <div class="section">
            <h2>Completion Tracker</h2>
            <ul>
                <li th:each="tracker : ${todayCompletion}">
                    <span th:text="${tracker.exercise.name}"></span>
                    <input type="checkbox"
                           th:checked="${tracker.completed}"
                           th:onclick="|window.location.href='/exercises/complete/' + ${tracker.exercise.id} + '?done=' + !${tracker.completed}|"/>
                </li>
                <li th:if="${todayCompletion == null || #lists.isEmpty(todayCompletion)}">No completion data for today.</li>
            </ul>
        </div>
    </div>
</div>
</body>
</html>